{% extends "base.html" %}

{% block content %}
<section class="hero">
    <div class="container text-center">
        <h1>Life on the Light Orange Planet</h1>
        <p>A researcher's journey across the Martian landscape, exploring the geology and atmosphere of our neighbor.
        </p>

        <form action="/search" method="GET" class="search-container">
            <input type="text" name="q" placeholder="Search research notes...">
            <button type="submit">Search</button>
        </form>

        <div class="stats-grid">
            <div class="stat-item">
                <span class="value">{{ stats.post_count }}</span>
                <span class="label">Research Posts</span>
            </div>
            <div class="stat-item">
                <span class="value">{{ stats.total_views }}</span>
                <span class="label">Total Views</span>
            </div>
        </div>
    </div>
</section>

<section class="posts-section container">
    {% for post in posts %}
    <div class="post-card-wrapper">
        <a href="/post/{{ post.slug }}" class="post-card">
            <div class="post-visual">
                {% if post.media_url %}
                {% if post.media_type == 'image' %}
                <img src="{{ post.media_url }}" alt="{{ post.title }}" class="media-content">
                {% elif post.media_type == 'video' %}
                <video src="{{ post.media_url }}" autoplay muted loop playsinline class="media-content"></video>
                {% endif %}
                {% else %}
                <div class="media-placeholder">Mars Exploratory Data</div>
                {% endif %}
            </div>

            <div class="post-card-content">
                <div class="post-meta-top">
                    <span class="date">{{ post.published_at.strftime('%B %d, %Y') }}</span>
                    <span class="views">{{ post.views }} views</span>
                </div>
                <h2>{{ post.title }}</h2>
                <div class="post-excerpt">
                    {% set content_text = post.content|striptags %}
                    {{ content_text[:1200] }}...
                </div>
                <span class="read-more">Complete Research Log &rarr;</span>
            </div>
        </a>
    </div>
    {% endfor %}
</section>
{% endblock %}