{% extends "base.html" %}

{% block title %}{{ post.title }} - the-planet-mars.org{% endblock %}

{% block head %}
<meta name="description" content="{{ post.content[:160]|striptags }}">
<meta property="og:title" content="{{ post.title }}">
<meta property="og:description" content="{{ post.content[:160]|striptags }}">
{% if post.media_url %}
<meta property="og:image" content="{{ post.media_url }}">
{% endif %}
{% endblock %}

{% block content %}
<article class="post-detail container">
    <header class="post-header">
        <span class="post-meta">{{ post.published_at.strftime('%B %d, %Y') }} • {{ post.views }} views • {{ post.likes
            }} likes</span>
        <h1>{{ post.title }}</h1>
        <div class="post-tags">
            {% for tag in post.tags %}
            <span class="tag">#{{ tag }}</span>
            {% endfor %}
        </div>
    </header>

    {% if post.media_url %}
    <div class="post-media">
        {% if post.media_type == 'image' %}
        <img src="{{ post.media_url }}" alt="{{ post.title }}">
        {% elif post.media_type == 'video' %}
        <video controls>
            <source src="{{ post.media_url }}" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        {% endif %}
    </div>
    {% endif %}

    <div class="post-content">
        {{ post.content|safe }}
    </div>

    <div class="post-actions-bar"
        style="justify-content: center; border-bottom: 1px solid #222; padding-bottom: 1.5rem; margin-bottom: 3rem;">
        <button class="action-btn like-btn" data-slug="{{ post.slug }}">Like ({{ post.likes }})</button>
        <button class="action-btn share-btn" data-url="{{ request.url }}" data-title="{{ post.title }}">Share</button>
        <button class="action-btn sub-btn">Subscribe</button>
    </div>
</article>

<style>
    .post-detail {
        padding: 5rem 2rem;
        max-width: 800px;
    }

    .post-header {
        margin-bottom: 3rem;
        text-align: center;
        border-bottom: none;
    }

    .post-header h1 {
        font-family: 'Playfair Display', serif;
        font-size: 3.5rem;
        margin: 1rem 0;
    }

    .tag {
        color: var(--mars-orange);
        margin-right: 1rem;
        font-size: 0.9rem;
    }

    .post-media img,
    .post-media video {
        width: 100%;
        border-radius: 12px;
        margin-bottom: 3rem;
    }

    .post-content {
        font-size: 1.1rem;
        line-height: 1.8;
    }

    .post-content h2,
    .post-content h3 {
        font-family: 'Playfair Display', serif;
        margin: 2rem 0 1rem;
        color: var(--mars-orange);
    }

    .post-actions {
        margin-top: 5rem;
        padding-top: 2rem;
        border-top: 1px solid var(--crater-gray);
        text-align: center;
    }

    .like-button {
        background: transparent;
        border: 2px solid var(--mars-orange);
        color: var(--mars-orange);
        padding: 1rem 2rem;
        border-radius: 50px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
    }

    .like-button:hover {
        background: var(--mars-orange);
        color: var(--space-black);
    }
</style>
{% endblock %}